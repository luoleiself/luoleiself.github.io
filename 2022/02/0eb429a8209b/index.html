<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon-32x32.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"luoleiself.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="React RouterReact Router v7 示例 工作模式  Declareative 声明式, 使用路由组件匹配 url, 导航路由 Data 在 React rendering 外配置路由, 支持 data APIs Framework 包含 Data mode 模式的全栈框架  123456789101112131415161718192021222324252627282930">
<meta property="og:type" content="article">
<meta property="og:title" content="React-Router.md">
<meta property="og:url" content="https://luoleiself.github.io/2022/02/0eb429a8209b/index.html">
<meta property="og:site_name" content="luoleiself&#39;s blog">
<meta property="og:description" content="React RouterReact Router v7 示例 工作模式  Declareative 声明式, 使用路由组件匹配 url, 导航路由 Data 在 React rendering 外配置路由, 支持 data APIs Framework 包含 Data mode 模式的全栈框架  123456789101112131415161718192021222324252627282930">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-02-15T07:37:49.000Z">
<meta property="article:modified_time" content="2025-03-21T12:52:44.210Z">
<meta property="article:author" content="luoleiself">
<meta property="article:tag" content="js">
<meta property="article:tag" content="jsx">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://luoleiself.github.io/2022/02/0eb429a8209b/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>React-Router.md | luoleiself's blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?5fa63b434a4b3e74b6258584372c74c0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="luoleiself's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">luoleiself's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/luoleiself" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://luoleiself.github.io/2022/02/0eb429a8209b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="luoleiself">
      <meta itemprop="description" content="努力的往前飞, 再累也无所谓, 黑夜过后的光芒有多美...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="luoleiself's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          React-Router.md
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-15 15:37:49" itemprop="dateCreated datePublished" datetime="2022-02-15T15:37:49+08:00">2022-02-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-21 20:52:44" itemprop="dateModified" datetime="2025-03-21T20:52:44+08:00">2025-03-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ES/" itemprop="url" rel="index"><span itemprop="name">ES</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ES/React/" itemprop="url" rel="index"><span itemprop="name">React</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>24k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>22 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><p><a target="_blank" rel="noopener" href="https://reactrouter.com/home">React Router v7</a> 示例</p>
<p>工作模式</p>
<ul>
<li>Declareative 声明式, 使用路由组件匹配 url, 导航路由</li>
<li>Data 在 React rendering 外配置路由, 支持 data APIs</li>
<li>Framework 包含 Data mode 模式的全栈框架</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npx create-react-router@latest my-react-router-app</span></span><br><span class="line"><span class="comment">// Declareative</span></span><br><span class="line"><span class="title function_">createRoot</span>(root).<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span> &lt;<span class="attr">Root</span> /&gt;</span> &#125; /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Data</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="title class_">Component</span>: <span class="title class_">Root</span>, <span class="attr">loader</span>: rootLoader&#125;</span><br><span class="line">]);</span><br><span class="line"><span class="title function_">createRoot</span>(root).<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;/</span>&gt;</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Framework</span></span><br><span class="line"><span class="comment">// routes.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  <span class="title function_">index</span>(<span class="string">&#x27;./home.tsx&#x27;</span>), <span class="comment">// 默认渲染组件</span></span><br><span class="line">  <span class="title function_">route</span>(<span class="string">&#x27;about&#x27;</span>, <span class="string">&#x27;./about.tsx&#x27;</span>),</span><br><span class="line">  <span class="title function_">route</span>(<span class="string">&#x27;dashboard&#x27;</span>, <span class="string">&#x27;./dashboard.tsx&#x27;</span>, [ <span class="comment">// 嵌套路由, 添加路由段</span></span><br><span class="line">    <span class="title function_">index</span>(<span class="string">&#x27;./home.tsx&#x27;</span>),</span><br><span class="line">    <span class="title function_">route</span>(<span class="string">&#x27;settings&#x27;</span>, <span class="string">&#x27;./setting.tsx&#x27;</span>)</span><br><span class="line">  ]),</span><br><span class="line">  <span class="title function_">layout</span>(<span class="string">&#x27;./auth/layout.tsx&#x27;</span>, [ <span class="comment">// 使用 布局, 但不会添加路由段</span></span><br><span class="line">    <span class="title function_">route</span>(<span class="string">&#x27;login&#x27;</span>, <span class="string">&#x27;./auth/login.tsx&#x27;</span>),</span><br><span class="line">    <span class="title function_">route</span>(<span class="string">&#x27;register&#x27;</span>, <span class="string">&#x27;./auth/register.tsx&#x27;</span>)</span><br><span class="line">  ]),</span><br><span class="line">  ...<span class="title function_">prefix</span>(<span class="string">&quot;projects&quot;</span>, [ <span class="comment">// 路由前缀</span></span><br><span class="line">    <span class="title function_">index</span>(<span class="string">&quot;./projects/home.tsx&quot;</span>),</span><br><span class="line">    <span class="title function_">layout</span>(<span class="string">&quot;./projects/project-layout.tsx&quot;</span>, [</span><br><span class="line">      <span class="title function_">route</span>(<span class="string">&quot;:pid&quot;</span>, <span class="string">&quot;./projects/project.tsx&quot;</span>),</span><br><span class="line">      <span class="title function_">route</span>(<span class="string">&quot;:pid/edit&quot;</span>, <span class="string">&quot;./projects/edit-project.tsx&quot;</span>),</span><br><span class="line">    ]),</span><br><span class="line">  ])</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>自动将 loaderData, actionData, params, matches 作为 props 传递给组件</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loader</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// 路由组件渲染之前执行</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">clientLoader</span>(<span class="params">&#123;params&#125;</span>)&#123;&#125; <span class="comment">// 客户端获取数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">action</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">clientAction</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ErrorBoundary</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// 路由发生错误时渲染</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">headers</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// 定义响应头</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">links</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// 定义页面 head 中的 &lt;link&gt; 元素信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">meta</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// 定义页面 head 中的 meta 信息</span></span><br><span class="line"><span class="comment">// 允许在 useMatches 中向 路由 匹配 中添加任意内容, 像面包屑</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> handle = &#123;&#125; </span><br><span class="line"><span class="comment">// 是否允许弹出路由重新验证不影响其数据的操作, 默认所有路由在操作后都会重新验证</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">shouldRevalidate</span>(<span class="params"></span>)&#123;&#125; </span><br></pre></td></tr></table></figure>

<p>以下部分为 React Router v6</p>
<span id="more"></span>

<h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p>创建路由方式</p>
<ul>
<li>使用 createBrowserRouter 和 RouterProvider<ul>
<li>对象形式</li>
<li>JSX 元素(createRoutesFromElements)</li>
</ul>
</li>
<li>使用 Routes, Route, BrowserRouter|HashRouter 内置组件</li>
<li>使用 useRoutes hook 和 BrowserRouter|HashRouter 内置组件</li>
</ul>
<h4 id="不支持-data-APIs"><a href="#不支持-data-APIs" class="headerlink" title="不支持 data APIs"></a>不支持 data APIs</h4><ul>
<li>&lt;BrowserRouter&gt;</li>
<li>&lt;MemoryRouter&gt;</li>
<li>&lt;HashRouter&gt;</li>
<li>&lt;NativeRouter&gt; 用于 React Native</li>
<li>&lt;StaticRouter&gt;</li>
</ul>
<h4 id="支持-data-APIs"><a href="#支持-data-APIs" class="headerlink" title="支持 data APIs"></a>支持 data APIs</h4><p>使用此方式创建路由, 同时启用用于数据获取的 loader, actions, fetchers 等 API</p>
<ul>
<li>createBrowserRouter</li>
<li>createMemoryRouter</li>
<li>createHashRouter</li>
<li>createStaticRouter</li>
</ul>
<h5 id="createBrowserRouter"><a href="#createBrowserRouter" class="headerlink" title="createBrowserRouter  "></a>createBrowserRouter <em id="createBrowserRouter"></em> <!--markdownlint-disable-line--></h5><ul>
<li>basename 基础路径</li>
<li>future 用于启用新版本语法的配置对象</li>
<li>hydrationData 当使用服务器端渲染时允许从服务器端获取数据</li>
<li>unstable_dataStrategy 低水平 API, 将会覆盖 React Router 内部的 loader, action 的执行</li>
<li>unstable_patchRoutesOnMis</li>
<li>window 用于区分环境, 对开发者工具或者测试来说非常有用</li>
</ul>
<p>返回值</p>
<ul>
<li>router 路由信息</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [];</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(routes, &#123;</span><br><span class="line">  <span class="attr">basename</span>: <span class="string">&#x27;/app&#x27;</span>,</span><br><span class="line">  <span class="attr">hydrationData</span>: &#123;</span><br><span class="line">    <span class="attr">root</span>: &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="RouterProvider"><a href="#RouterProvider" class="headerlink" title="RouterProvider"></a>RouterProvider</h5><p>路由根组件, 所有的路由对象或者 Data APIS 都通过此组件注入 React 应用程序</p>
<ul>
<li>router 路由信息</li>
<li>fallbackElement 后备内容</li>
<li>future 用于启用新版本语法的配置对象</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StrictMode</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createRoot&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createBrowserRouer, createRoutesFromElements, <span class="title class_">RouterProvider</span>, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const router = createBrowserRouter();</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;</span> <span class="attr">fallbackElement</span>=<span class="string">&#123;</span>&lt;<span class="attr">SpinnerOfDom</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>使用对象形式创建路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用对象形式创建路由</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Root</span>/&gt;</span></span>,</span><br><span class="line">    <span class="attr">loader</span>: rootLoader,</span><br><span class="line">    <span class="attr">action</span>: rootAction,</span><br><span class="line">    <span class="attr">errorElement</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">ErrorPage</span>/&gt;</span></span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;<span class="attr">index</span>: <span class="literal">true</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Dashboard</span>/&gt;</span></span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 JSX 元素创建路由</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 JSX 元素创建路由</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(</span><br><span class="line">  <span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">path</span>=<span class="string">&quot;/&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Root</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      errorElement=&#123;<span class="tag">&lt;<span class="name">ErrorPage</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      loader=&#123;rootLoader&#125;</span></span><br><span class="line"><span class="language-xml">      action=&#123;rootAction&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">index</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Dashboard</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* ... */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="createStaticHandler"><a href="#createStaticHandler" class="headerlink" title="createStaticHandler"></a>createStaticHandler</h5><p>通常用于服务器端渲染的 数据获取和提交, 配合 <code>createStaticRouter</code> 使用</p>
<ul>
<li>routes 路由信息</li>
<li>opts<ul>
<li>basename</li>
<li>future 用于启用新版本语法的配置对象</li>
<li>mapRouteProperties</li>
</ul>
</li>
</ul>
<p>返回值</p>
<ul>
<li>staticHandler.dataRoutes 路由信息</li>
<li>staticHandler.query() 执行当前请求的 action, loader 并返回 context 包含了渲染页面的所有数据<ul>
<li>request 请求</li>
<li>opts<ul>
<li>routeId 如果需要调用不同的路由的 action 或 loader, 传入指定的 routeId</li>
<li>requestContext 将请求上下文信息传入 action 或 loader</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>staticHandler.query() 返回值</p>
<ul>
<li>context 包含渲染页面信息的请求上下文</li>
</ul>
<h5 id="createStaticRouter"><a href="#createStaticRouter" class="headerlink" title="createStaticRouter"></a>createStaticRouter</h5><ul>
<li>routes 路由信息</li>
<li>context 请求的上下文信息</li>
<li>opts<ul>
<li>future 用于启用新版本语法的配置对象</li>
</ul>
</li>
</ul>
<p>返回值</p>
<ul>
<li>router 路由信息</li>
</ul>
<h5 id="StaticRouterProvider"><a href="#StaticRouterProvider" class="headerlink" title="StaticRouterProvider"></a>StaticRouterProvider</h5><p>接收来自 <code>createStaticHandler</code> 的 context 和  <code>createStaticRouter</code> 的 router, 用于服务器端渲染</p>
<ul>
<li>router 通过 createStaticRouter 创建的路由</li>
<li>context 接收来自 staticHandler.query() 返回的结果作为数据</li>
<li>hydrate 是否禁用客户端自动数据连接</li>
<li>nonce 标识使用严格 CSP(安全内容策略) 时允许资源的加密随机数</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;server.jsx&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StrictMode</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createStaticHandler, createStaticRouter, <span class="title class_">StaticRouterProvider</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;renderToString&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// routes</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> handler = <span class="title function_">createStaticHandler</span>(routes);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;*&#x27;</span>, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> fetchRequest = <span class="title function_">createRequest</span>(req, res);</span><br><span class="line">  <span class="keyword">let</span> context = <span class="keyword">await</span> handler.<span class="title function_">query</span>(fetchRequest);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> router = <span class="title function_">createStaticRouter</span>(handler.<span class="property">dataRoutes</span>, context);</span><br><span class="line">  <span class="keyword">let</span> html = <span class="title function_">renderToString</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">StaticRouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;</span> <span class="attr">context</span>=<span class="string">&#123;context&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;&lt;!DOCTYPE html&gt;&quot;</span> + html);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> listener = app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123;port&#125; =  listener.<span class="title function_">address</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`listening on port <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;client.jsx&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StrictMode</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, <span class="title class_">RouterProvider</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;hydrateRoot&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// routes</span></span><br><span class="line"><span class="keyword">let</span> router = <span class="title function_">createBrowserRouter</span>(routes);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title function_">hydrateRoot</span>(</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>),</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Route"><a href="#Route" class="headerlink" title="Route  "></a>Route <em id="Route"></em> <!--markdownlint-disable-line--></h3><p>React Router 创建路由的 <a href="#internal-component">内置组件</a>, data APIs 由类似 <a href="#createBrowserRouter">createBrowserRouter</a> 创建的路由才有效</p>
<ul>
<li>index 标识当路由未匹配到时默认匹配</li>
<li>path 路由</li>
<li>caseSensitive  path 是否区分大小写</li>
<li>handle 当前路由的任意数据, 作用同 <a href="#useMatches">useMatches</a></li>
<li>element/component 当路由匹配时渲染, 使用 element 意味着不需要再额外的使用 passProps 风格的方式传递 props</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 需要使用其他方式传递 props</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;:userId&quot;</span> component=&#123;<span class="title class_">Profile</span>&#125; passProps=&#123;&#123;<span class="attr">animate</span>: <span class="literal">true</span>&#125;&#125; /&gt;</span><br><span class="line"><span class="comment">// 或者使用 renderProps 传递 props</span></span><br><span class="line"><span class="comment">// 或者使用 HOC 传递 props</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span> <span class="attr">render</span>=<span class="string">&#123;(routeProps)</span> =&gt;</span> (<span class="tag">&lt;<span class="name">Profile</span> <span class="attr">routeProps</span>=<span class="string">&#123;routeProps&#125;</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span>)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span> <span class="attr">children</span>=<span class="string">&#123;(&#123;match&#125;)</span> =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">  match ? <span class="tag">&lt;<span class="name">Profile</span> <span class="attr">match</span>=<span class="string">&#123;match&#125;</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span> : <span class="tag">&lt;<span class="name">NotFound</span> /&gt;</span> </span></span><br><span class="line"><span class="language-xml">)&#125; /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 element 传递 props</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;:userId&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Profile</span> <span class="attr">animate</span>=<span class="string">&#123;true&#125;</span> /&gt;</span>&#125; /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用对象方式创建</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Root</span> /&gt;</span></span>,</span><br><span class="line">    <span class="attr">errorElement</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">ErrorPage</span> /&gt;</span></span>,</span><br><span class="line">    <span class="attr">loader</span>: <span class="title function_">async</span> (&#123;request, params&#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">fetch</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">action</span>: <span class="title function_">async</span> (&#123;request&#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">update</span>(<span class="keyword">await</span> request.<span class="title function_">formData</span>());</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">children</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 JSX 元素创建</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, createRoutesFromElements, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(<span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">path</span>=<span class="string">&quot;/&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Root</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    errorElement=&#123;<span class="tag">&lt;<span class="name">ErrorPage</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    lazy=&#123;() =&gt; import(&#x27;./a&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">    loader=&#123;async (&#123;request, params&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">      return fetch();</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    action=&#123;async (&#123;request&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">      return update(await request.formData());</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  &gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">index</span> <span class="attr">path</span>=<span class="string">&quot;&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">DashBoard</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<h4 id="Route-action"><a href="#Route-action" class="headerlink" title="Route.action  "></a>Route.action <em id="Route.action"></em> <!--markdownlint-disable-line--></h4><p>当 React Router 抽象了异步 UI 和重新验证的复杂性时, 为应用程序提供了一种使用简单的 HTML 和 HTTP 语句执行数据更改的方法</p>
<p>每当应用程序向路由发送 non-get(POST, PUT, PATCH, DELETE) 提交时, 都将调用此 action</p>
<p>动态路由参数分别传递给 <a href="#Route.loader">loader</a>, <a href="#useParams">useMatch</a>, <a href="#useParams">useParams</a></p>
<ul>
<li>request  request 请求实例</li>
<li>params 动态路由参数</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, createRoutesFromElements, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(</span><br><span class="line">  <span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">path</span>=<span class="string">&quot;/projects/:id/edit&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">action</span>=<span class="string">&#123;async</span> (&#123;<span class="attr">request</span>, <span class="attr">params</span>&#125;) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        console.log(params.id);</span></span><br><span class="line"><span class="language-xml">        const formData = request.formData();</span></span><br><span class="line"><span class="language-xml">        return editProjectById(params.id);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* .... */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>以下几种方式都将调用 Route 的 action</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useFetcher, useSubmit&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fetcher = <span class="title function_">useFetcher</span>();</span><br><span class="line"><span class="keyword">const</span> submit = <span class="title function_">useSubmit</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下几种方式都将调用 Route 的 action</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/projects&quot;</span>/&gt;</span></span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">fetcher.Form</span> <span class="attr">method</span>=<span class="string">&quot;put&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/projects/123/edit&quot;</span> /&gt;</span></span>;</span><br><span class="line"><span class="title function_">submit</span>(data, &#123;<span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>, <span class="attr">action</span>: <span class="string">&#x27;/projects&#x27;</span>&#125;);</span><br><span class="line">fetcher.<span class="title function_">submit</span>(data, &#123;<span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>, <span class="attr">action</span>: <span class="string">&#x27;/projects/123/edit&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Route-loader"><a href="#Route-loader" class="headerlink" title="Route.loader  "></a>Route.loader <em id="Route.loader"></em> <!--markdownlint-disable-line--></h4><p>组件渲染之前调用定义的 loader 函数并将返回的数据传入 React 元素</p>
<p>动态路由参数分别传递给 <a href="#Route.action">action</a>, <a href="#useMatch">useMatch</a>, <a href="#useParams">useParams</a></p>
<ul>
<li>params 动态路由参数</li>
<li>request request 请求实例</li>
<li>hydrate 服务器端渲染时处理 hydrate 数据</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, createRoutesFromElements, <span class="title class_">Route</span>, useLoaderData&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(</span><br><span class="line">  <span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">path</span>=<span class="string">&quot;/projects/:id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Projects</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      loader=&#123;async (&#123;request, params&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        console.log(params.id);</span></span><br><span class="line"><span class="language-xml">        const res = await fetch();</span></span><br><span class="line"><span class="language-xml">        if(res.status == 404) &#123;</span></span><br><span class="line"><span class="language-xml">          throw new Response(&#x27;Not Found&#x27;, &#123;status: 404&#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        return res.json();</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* ... */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Projects</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> projects = <span class="title function_">useLoaderData</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    projects</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Route-lazy"><a href="#Route-lazy" class="headerlink" title="Route.lazy"></a>Route.lazy</h4><p>路由懒加载</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, createRoutesFromElements, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(</span><br><span class="line">  <span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">path</span>=<span class="string">&quot;/&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Layout</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;a&quot;</span> <span class="attr">lazy</span>=<span class="string">&#123;()</span> =&gt;</span> import(&#x27;./a&#x27;)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;b&quot;</span> <span class="attr">lazy</span>=<span class="string">&#123;()</span> =&gt;</span> import(&#x27;./b&#x27;)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="Route-shouldRevalidate"><a href="#Route-shouldRevalidate" class="headerlink" title="Route.shouldRevalidate"></a>Route.shouldRevalidate</h4><p>如果定义了此函数, 将在路由的 loader 调用之前执行此函数验证新数据, 如果返回 false 则不在调用 loader 并且保持当前页面数据不变</p>
<h4 id="Route-errorElement-errorBoundary"><a href="#Route-errorElement-errorBoundary" class="headerlink" title="Route.errorElement/errorBoundary"></a>Route.errorElement/errorBoundary</h4><p>当组件的 loader, action 或者在渲染过程中抛出错误时代替 element 显示</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter, createRoutesFromElements, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(</span><br><span class="line">  <span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">errorElement</span>=<span class="string">&#123;</span>&lt;<span class="attr">ErrorElement</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      loader=&#123;async (&#123;request, params&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const res = await fetch();</span></span><br><span class="line"><span class="language-xml">        if(res.status == 404)&#123;</span></span><br><span class="line"><span class="language-xml">          throw new Response(&#x27;Not Found&#x27;, &#123;status: 404&#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        const json = res.json();</span></span><br><span class="line"><span class="language-xml">        return &#123;json&#125;</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* ... */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="Route-hydrateFallbackElement-hydrateFallback"><a href="#Route-hydrateFallbackElement-hydrateFallback" class="headerlink" title="Route.hydrateFallbackElement/hydrateFallback"></a>Route.hydrateFallbackElement/hydrateFallback</h4><p>初始化服务器端渲染的内容没有被 hyrate 的组件, 如果未使用类似 <a href="#createBrowserRouter">createBrowserRouter</a> 创建的路由则无效, 通常 SSR 的应用不会使用此项</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createBrowserRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">loader</span>: rootLoader,</span><br><span class="line">    <span class="title class_">Component</span>: <span class="title class_">Root</span>,</span><br><span class="line">    <span class="attr">children</span>:[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;invoice&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;invoice/:id&#x27;</span>,</span><br><span class="line">        <span class="attr">loader</span>: invoiceLoader,</span><br><span class="line">        <span class="title class_">Component</span>: <span class="title class_">Invoice</span>,</span><br><span class="line">        <span class="attr">hydrateFallback</span>: <span class="title class_">InvoiceFallback</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">],</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">future</span>:&#123;</span><br><span class="line">    <span class="attr">v7_partialHydration</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">hydrationData</span>:&#123;</span><br><span class="line">    <span class="attr">root</span>:&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="React-Router-内置组件"><a href="#React-Router-内置组件" class="headerlink" title="React Router 内置组件  "></a>React Router 内置组件 <em id="internal-component"></em> <!--markdownlint-disable-line--></h3><h4 id="Await"><a href="#Await" class="headerlink" title="Await  "></a>Await <em id="Await"></em> <!--markdownlint-disable-line--></h4><p>用于呈现具有自动错误处理功能的延迟值</p>
<ul>
<li>children React 元素或者一个函数</li>
<li>resolve 返回一个 Promise 当延迟值被 resolve 后渲染</li>
<li>errorElement 当 resolve 被 reject 后渲染</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Await</span>, useLoaderData, defer, <span class="title class_">Route</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">loader</span>=<span class="string">&#123;async</span> () =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">    let book = await getBook();</span></span><br><span class="line"><span class="language-xml">    let reviews = getviews();</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    return defer(&#123;book, reviews&#125;);</span></span><br><span class="line"><span class="language-xml">  &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  element=&#123;<span class="tag">&lt;<span class="name">Book</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">&gt;</span></span><br><span class="line"><span class="language-xml">  &#123;/* ... */&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Book</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;book, reviews&#125; = <span class="title function_">useLoaderData</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Await</span> <span class="attr">resolve</span>=<span class="string">&#123;reviews&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Review</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Await</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h4><p>围绕普通 HTML 表单的包装器, 模拟浏览器进行客户端路由和数据更改</p>
<ul>
<li>action</li>
<li>method</li>
<li>navigate 标识表单默认提交行为提交之后的动作是否跳转</li>
<li>fetchKey</li>
<li>replace 标识表单提交行为替换当前历史记录栈</li>
<li>relative 标识表单提交的后的跳转路径</li>
<li>reloadDocument 标识跳过 React Router 的表单提交行为并使用浏览器内置的表单默认行为</li>
<li>state</li>
<li>preventScrollReset 标识表单提交行为是否滚动页面位置</li>
</ul>
<h4 id="Link"><a href="#Link" class="headerlink" title="Link  "></a>Link <em id="Link"></em> <!--markdownlint-disable-line--></h4><p>路由导航</p>
<ul>
<li>to</li>
<li>relative 相对路径, 默认为 Route 的相对层级</li>
<li>preventScrollRest 标识是否滚动到页面顶部</li>
<li>replace 标识是否替换当前历史记录栈</li>
<li>state 任何状态</li>
<li>reloadDocument</li>
</ul>
<h4 id="NavLink"><a href="#NavLink" class="headerlink" title="NavLink"></a>NavLink</h4><p>特殊的 Link, 可以标识当前活动状态的导航</p>
<ul>
<li>className 通过函数自定义样式</li>
<li>style 通过函数自定义样式</li>
<li>children</li>
<li>end 改变路由匹配逻辑, 当前路由是否以 to 结尾</li>
<li>caseSensitive 是否区分大小写</li>
<li>aria-current</li>
<li>reloadDocument</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NavLink</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">NavLink</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">to</span>=<span class="string">&quot;/message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">className</span>=<span class="string">&#123;(&#123;isActive,</span> <span class="attr">isPending</span>, <span class="attr">isTransitioning</span>&#125;) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">    return isPending ? &#x27;pending&#x27; : isActive ? &#x27;active&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">  &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  style=&#123;(&#123;isActive, isPending, isTransitioning&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">    return &#123;</span></span><br><span class="line"><span class="language-xml">      fontWeight: isActive ? &#x27;bold&#x27; : &#x27;&#x27;,</span></span><br><span class="line"><span class="language-xml">      color: isPending ? &#x27;red&#x27; : &#x27;black&#x27;,</span></span><br><span class="line"><span class="language-xml">      viewTransitionName: isTransitioning ? &#x27;slide&#x27; : &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">  &#125;&#125;</span></span><br><span class="line"><span class="language-xml">/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Navigate"><a href="#Navigate" class="headerlink" title="Navigate"></a>Navigate</h4><p>当组件渲染后改变当前的路由, 通常用在 class 组件中, 建议使用 <a href="#useNavigate">useNavigate</a> Hook</p>
<ul>
<li>to 跳转的目标路由</li>
<li>replace 是否使用替换模式</li>
<li>state 任何状态</li>
<li>relative</li>
</ul>
<h4 id="Outlet"><a href="#Outlet" class="headerlink" title="Outlet"></a>Outlet</h4><p>渲染嵌套子路由</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">DashBoard</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>DashBoard<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ... */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Outlet</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">DashBoard</span>/&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">path</span>=<span class="string">&quot;message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">DashBoardMessage</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;tasks&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">DashBoardTasks</span>/&gt;</span>&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Route-1"><a href="#Route-1" class="headerlink" title="Route"></a><a href="#Route">Route</a></h4><p>React Router <a href="#internal-component">内置组件</a></p>
<h4 id="Routes"><a href="#Routes" class="headerlink" title="Routes"></a>Routes</h4><p>匹配组件内的 Route, 用于不使用 <a href="#createBrowserRouter">createBrowserRouter</a> 创建 Route 的情况</p>
<p>也可以使用 <a href="#useRoutes">useRoutes</a> Hook 创建路由</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Routes</span>, <span class="title class_">Route</span>, <span class="title class_">BrowserRouter</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span>&gt;</span>header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span> &lt;<span class="attr">DashBoard</span>/&gt;</span> &#125;&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;message&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span> &lt;<span class="attr">DashBoardMessage</span> /&gt;</span> &#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;tasks&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span> &lt;<span class="attr">DashBoardTasks</span> /&gt;</span> &#125; /&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;team&quot;</span> <span class="attr">element</span>=<span class="string">&#123;</span> &lt;<span class="attr">Team</span> /&gt;</span> &#125; /&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">footer</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ScrollRestoration"><a href="#ScrollRestoration" class="headerlink" title="ScrollRestoration"></a>ScrollRestoration</h4><p>在渲染完成之后模拟浏览器在位置更改时的滚动恢复, 以确保滚动位置恢复到正确的位置</p>
<h4 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>渲染所有的 link 标签</p>
<h4 id="Meta"><a href="#Meta" class="headerlink" title="Meta"></a>Meta</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>渲染所有的 meta 标签</p>
<h4 id="PrefetchPageLinks"><a href="#PrefetchPageLinks" class="headerlink" title="PrefetchPageLinks"></a>PrefetchPageLinks</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>为即将导航的另一个页面的资源添加预取标签 &lt;link rel=’prefetch|preload|modulepreload’ &gt;</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PrefetchPageLinks</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">PrefetchPageLinks</span> <span class="attr">page</span>=<span class="string">&#x27;/absolute/path&#x27;</span>/&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="React-Router-内置-Hook"><a href="#React-Router-内置-Hook" class="headerlink" title="React Router 内置 Hook"></a>React Router 内置 Hook</h3><h4 id="useActionData"><a href="#useActionData" class="headerlink" title="useActionData"></a>useActionData</h4><p>获取上一个导航操作结果的返回值, 如果没有提交操作则返回 undefined</p>
<p>通常用于表单验证错误, 如果表单不正确可以返回错误并让用户重试</p>
<h4 id="useAsyncError"><a href="#useAsyncError" class="headerlink" title="useAsyncError"></a>useAsyncError</h4><p>获取最近的 <a href="#Await">Await</a> 组件被 rejection 的结果</p>
<h4 id="useAsyncValue"><a href="#useAsyncValue" class="headerlink" title="useAsyncValue"></a>useAsyncValue</h4><p>获取最近的 <a href="#Await">Await</a> 组件被 resolved 的结果</p>
<h4 id="useBeforeUnload"><a href="#useBeforeUnload" class="headerlink" title="useBeforeUnload"></a>useBeforeUnload</h4><p>当用户离开页面时 (window.onbeforeunload) 保存重要的数据</p>
<h4 id="useBlocker"><a href="#useBlocker" class="headerlink" title="useBlocker"></a>useBlocker</h4><p>阻止用户离开当前页面, 并呈现自定义 UI 提示用户允许确认导航</p>
<ul>
<li>state 当前 blocker 的状态<ul>
<li>unblocked 空闲没有阻止状态</li>
<li>blocked 阻止状态</li>
<li>proceeding 正在从阻断器中前进</li>
</ul>
</li>
<li>proceed() 允许跳转</li>
<li>reset() 重置 blocker 状态并留在当前位置</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> blocker = <span class="title function_">useBlocker</span>();</span><br></pre></td></tr></table></figure>

<h4 id="useFetcher"><a href="#useFetcher" class="headerlink" title="useFetcher"></a>useFetcher</h4><p>不想在更改 URL 的情况下调用 <a href="#Route.loader">loader</a>, <a href="#Route.action">action</a>获取页面的数据并重新验证, 或者需要同时进行多个更新</p>
<p>与服务器的许多交互不是导航事件, useFetcher 允许将 UI 插入到操作或 <a href="#Route.loader">loader</a> 中而不引起导航</p>
<ul>
<li><p>key 默认为 内置组件 生成唯一的 key</p>
</li>
<li><p>fetcher.Form 像 Form <a href="#internal-component">内置组件</a> 一样, 只是不会引起导航</p>
</li>
<li><p>fetcher.state 标识当前 Fetcher 的状态</p>
<ul>
<li>idle 空闲</li>
<li>submiting 由 fetcher 使用 post, put, patch, delete 提交正在调用路由操作</li>
<li>loading fetcher 正在调用 fetcher.load 或者在单独提交或调用用 <code>useRevalidator</code> 之后重新验证</li>
</ul>
</li>
<li><p>fetcher.data 获取从 <a href="#Route.loader">loader</a> 或 <a href="#Route.action">action</a> 加载的数据</p>
</li>
<li><p>fetcher.formData 当使用 fetcher.Form 和 <code>fetcher.submit()</code> 时, formData 可用</p>
</li>
<li><p>fetcher.json 当使用 <code>fetcher.submit(data, &#123;formEnctype: &#39;application/json&#39;&#125;)</code> 提交时可用</p>
</li>
<li><p>fetcher.text 当使用 <code>fetcher.submit(data, &#123;formEnctype: &#39;text/plain&#39;&#125;)</code> 提交时可用</p>
</li>
<li><p>fetcher.formAction 提交时的 form 的 url</p>
</li>
<li><p>fetcher.formMethod 提交时的方法 get, post, put, patch, delete</p>
</li>
<li><p>fetcher.load(href, options) 从 <a href="#Route.loader">loader</a> 中获取数据</p>
</li>
<li><p>fetcher.submit(data, options?) 包含了 <a href="#useSubmit">useSubmit</a> 调用的实例, 接收和 <a href="#useSubmit">useSubmit</a> 相同的参数</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useFetcher&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SomeCompoent</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> fetcher = <span class="title function_">useFetcher</span>(&#123;<span class="attr">key</span>: <span class="string">&#x27;new-key&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fetcher.<span class="title function_">submit</span>(data, options);</span><br><span class="line">    fetcher.<span class="title function_">load</span>(href);</span><br><span class="line">  &#125;,[fetcher]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 渲染的表单不会引起导航 </span></span><br><span class="line">  <span class="keyword">return</span> （</span><br><span class="line">    &lt;fetcher.<span class="property">Form</span> action=<span class="string">&quot;/fetcher-action&quot;</span> method=<span class="string">&#x27;post&#x27;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">onclick</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        if(fetcher.state === &#x27;idle&#x27; &amp;&amp; !fetcher.data)&#123;</span></span><br><span class="line"><span class="language-xml">          fetcher.submit(fetcher.formData?.get(&#x27;username&#x27;), &#123;formEnctype: &#x27;application/json&#x27;&#125;);</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>fetcher.formAction &#123;fetcher.formAction&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>fetcher.formMethod &#123;fetcher.formMethod&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &#123;fetcher.<span class="property">json</span> ? (<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;fetcher.json&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>) : (<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>json: null<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>)&#125;</span><br><span class="line">      &#123;fetcher.<span class="property">data</span> ? (<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;fetcher.data&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>) : (<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>loading data...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)&#125;</span><br><span class="line">    &lt;/fetcher.<span class="property">Form</span>&gt;</span><br><span class="line">  ）  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useFetchers"><a href="#useFetchers" class="headerlink" title="useFetchers"></a>useFetchers</h4><p>获取除了 load, submit, Form 属性的 fetcher 数组</p>
<h4 id="useFormAction"><a href="#useFormAction" class="headerlink" title="useFormAction"></a>useFormAction</h4><p>用在 Form <a href="#internal-component">内置组件</a> 内部自动解析当前路由的默认和相关操作</p>
<ul>
<li>可以直接计算当前的 formAction</li>
<li>也可以用在 <a href="#useSubmit">useSubmit</a> 或者 <code>fetcher.submit</code> 中</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useFormAction&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DeleteButton</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> formAction = <span class="title function_">useFormAction</span>(<span class="string">&#x27;destroy&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formAction</span>=<span class="string">&#123;formAction&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">formMethod</span>=<span class="string">&quot;post&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      Delete</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> submit = <span class="title function_">useSubmit</span>();</span><br><span class="line"><span class="keyword">const</span> formAction = <span class="title function_">useFormAction</span>(<span class="string">&#x27;delete&#x27;</span>);</span><br><span class="line"><span class="title function_">submit</span>(formData, &#123;formAction&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="useHref"><a href="#useHref" class="headerlink" title="useHref"></a>useHref</h4><h4 id="useInRouterContext"><a href="#useInRouterContext" class="headerlink" title="useInRouterContext"></a>useInRouterContext</h4><p>返回组件是否在 Router 的上下文环境中渲染的</p>
<h4 id="useLinkClickHandler"><a href="#useLinkClickHandler" class="headerlink" title="useLinkClickHandler"></a>useLinkClickHandler</h4><p>获取 Link 的 click 事件句柄</p>
<h4 id="useLoaderData"><a href="#useLoaderData" class="headerlink" title="useLoaderData"></a>useLoaderData</h4><p>获取路由 <a href="#Route.loader">loader</a> 返回的数据, 当路由 loader 被调用之后, 数据将自动重新验证并从 loader 中返回最新结果</p>
<p>useLoaderData 不会启动获取, 只读取 React Router 内部管理的结果</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StrictMode</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;createRoot&#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useLoaderData, createBrowserRouter, createRoutesFromElements, <span class="title class_">RouterProvider</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Albums</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> albums = <span class="title function_">useLoaderData</span>();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Albums<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowserRouter</span>(<span class="title function_">createRoutesFromElements</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">path</span>=<span class="string">&quot;/&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">element</span>=<span class="string">&#123;</span>&lt;<span class="attr">Albums</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">    loader=&#123;async (&#123;request, params&#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">      return fakeFecth();</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  /&gt;</span></span><br><span class="line">));</span><br><span class="line"><span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)).<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="useLocation"><a href="#useLocation" class="headerlink" title="useLocation"></a>useLocation</h4><p>获取当前 location 的对象</p>
<ul>
<li>location.hash</li>
<li>location.key</li>
<li>location.pathname</li>
<li>location.search</li>
<li>location.state 通过 <a href="#Link">&lt;Link state/&gt;</a> 或者 <a href="#useNavigate">navigate</a> 创建的</li>
</ul>
<h4 id="useMatch"><a href="#useMatch" class="headerlink" title="useMatch  "></a>useMatch <em id="useMatch"></em> <!--markdownlint-disable-line--></h4><p>返回给定路径相对于当前位置上匹配的数据</p>
<p>动态路由参数分别传递给 <a href="#Route.loader">loader</a>, <a href="#Route.action">action</a>, <a href="#useParams">useParams</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useMatch, useParams&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Random</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> match = <span class="title function_">useMatch</span>(<span class="string">&#x27;/projects/:projectId/tasks/:taskId&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> params = <span class="title function_">useParams</span>();</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(match.<span class="property">params</span>.<span class="property">projectId</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(match.<span class="property">params</span>.<span class="property">taskId</span>);</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="property">projectId</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="property">taskId</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useMatches"><a href="#useMatches" class="headerlink" title="useMatches  "></a>useMatches <em id="useMatches"></em> <!--markdownlint-disable-line--></h4><p>获取当前页面匹配到的路由信息</p>
<h4 id="useNavigate"><a href="#useNavigate" class="headerlink" title="useNavigate  "></a>useNavigate <em id="useNavigate"></em> <!--markdownlint-disable-line--></h4><p>返回一个 navigate 函数, 能够以编程式导航, 该函数接收两个参数</p>
<ul>
<li>to 跳转的目标路由</li>
<li>options<ul>
<li>replace</li>
<li>state</li>
<li>preventScrollReset</li>
<li>relative</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useNavigate&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useLogoutTimer</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> userIsInactive = <span class="title function_">useFakeInactive</span>();</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>();</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(userIsInactive)&#123;</span><br><span class="line">      fake.<span class="title function_">logout</span>();</span><br><span class="line">      <span class="title function_">navigate</span>(<span class="string">&#x27;/session-time-out&#x27;</span>, &#123;<span class="attr">state</span>: &#123;<span class="attr">token</span>: <span class="string">&#x27;token&#x27;</span>&#125;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[userIsInactive]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useNavigation"><a href="#useNavigation" class="headerlink" title="useNavigation"></a>useNavigation</h4><p>获取当前页面的所有导航信息</p>
<ul>
<li>navigation.state</li>
<li>navigation.location</li>
<li>navigation.formData</li>
<li>navigation.json</li>
<li>navigation.text</li>
<li>navigation.formAction</li>
<li>navigation.formMethod</li>
<li>navigation.formEnctype</li>
</ul>
<h4 id="useNavigationType"><a href="#useNavigationType" class="headerlink" title="useNavigationType"></a>useNavigationType</h4><p>返回当前页的导航类型</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">NavigationType</span> = <span class="string">&#x27;POP&#x27;</span> | <span class="string">&#x27;PUSH&#x27;</span> | <span class="string">&#x27;REPLACE&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="useParams"><a href="#useParams" class="headerlink" title="useParams  "></a>useParams <em id="useParams"></em> <!--markdownlint-disable-line--></h4><p>返回当前 url 中被 Route 匹配到的动态路由参数对象</p>
<p>动态路由参数分别传递给 <a href="#Route.loader">loader</a>, <a href="#Route.action">action</a>, <a href="#useMatch">useMatch</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Books</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;id&#125; = <span class="title function_">useParams</span>();</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="title class_">Route</span></span><br><span class="line">  path=<span class="string">&quot;/books/:id&quot;</span></span><br><span class="line">  element=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">Books</span>/&gt;</span></span>&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="useResolvedPath"><a href="#useResolvedPath" class="headerlink" title="useResolvedPath"></a>useResolvedPath</h4><p>返回给定 to 相对于当前位置的 pathname</p>
<h4 id="useRevalidator"><a href="#useRevalidator" class="headerlink" title="useRevalidator"></a>useRevalidator</h4><p>返回一个验证器对象, 允许重新验证数据</p>
<ul>
<li>revalidator.state</li>
<li>revalidator.revalidate()</li>
</ul>
<h4 id="useRouteError"><a href="#useRouteError" class="headerlink" title="useRouteError  "></a>useRouteError <em id="useRouteError"></em> <!--markdownlint-disable-line--></h4><p>用在 errorElement 内部, 捕获由 <a href="#Route.action">action</a>, <a href="#Route.loader">loader</a>, 或者渲染期间抛出的错误</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRouteError, isRouteErrorResponse, <span class="title class_">Route</span>, json&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ErrorBoundary</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> error = <span class="title function_">useRouteError</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(<span class="title function_">isRouteErrorResponse</span>(error))&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Oops!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;error.status&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;error.statusText&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;error.data?.message &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;error.data.message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Oops<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">Route</span></span><br><span class="line">  errorElement=&#123;<span class="language-xml"><span class="tag">&lt;<span class="name">ErrorBoundary</span>/&gt;</span></span>&#125;</span><br><span class="line">  action=&#123;<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="title function_">json</span>(</span><br><span class="line">      &#123;<span class="attr">message</span>: <span class="string">&#x27;email is required&#x27;</span> &#125;,</span><br><span class="line">      &#123;<span class="attr">status</span>: <span class="number">400</span>&#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="useRouteLoaderData"><a href="#useRouteLoaderData" class="headerlink" title="useRouteLoaderData"></a>useRouteLoaderData</h4><p>路由树上任何位置的当前渲染路线上的数据都可用, 对于树深层需要来自更高层路由的数据的组件以及需要树深层的子路由的数据的父路由非常有用</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRouteLoaderData&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SomeComp</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="title function_">useRouteLoaderData</span>(<span class="string">&#x27;root&#x27;</span>);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">createBrowserRouter</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="title function_">fetchUser</span>(),</span><br><span class="line">    <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Root</span> /&gt;</span></span></span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;jobs/:jobId&#x27;</span>,</span><br><span class="line">        <span class="attr">loader</span>: loaderJob,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">JobListing</span> /&gt;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h4 id="useRoutes"><a href="#useRoutes" class="headerlink" title="useRoutes  "></a>useRoutes <em id="useRoutes"></em> <!--markdownlint-disable-line--></h4><p>相当于 Routes <a href="#internal-component">内置组件</a> 的函数版本</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoutes, <span class="title class_">BrowserRouter</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> element = <span class="title function_">useRoutes</span>([</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">DashBoard</span> /&gt;</span></span>, <span class="attr">children</span>: [</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">DashBoardMessage</span> /&gt;</span></span> &#125;,</span><br><span class="line">      &#123; <span class="attr">path</span>: <span class="string">&#x27;tasks&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">DashBoardTasks</span> /&gt;</span></span> &#125;</span><br><span class="line">    ]&#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;team&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Team</span> /&gt;</span></span> &#125;</span><br><span class="line">  ]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;element&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useSearchParams"><a href="#useSearchParams" class="headerlink" title="useSearchParams"></a>useSearchParams</h4><p>读取或修改当前 URL 的参数部分</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useSearchParams&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [searchParams, setSearchParams] = <span class="title function_">useSearchParams</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleSumbit</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="comment">// 序列化字段</span></span><br><span class="line">    <span class="keyword">const</span> params = <span class="title function_">serializeFormQuery</span>(e.<span class="property">target</span>);</span><br><span class="line">    <span class="title function_">setSearchParams</span>(params);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="useSubmit"><a href="#useSubmit" class="headerlink" title="useSubmit  "></a>useSubmit <em id="useSubmit"></em> <!--markdownlint-disable-line--></h4><p>Form 表单提交的命令版本</p>
<ul>
<li>submit(data, options?) 手动提交方法<ul>
<li>options 支持 form 表单的大多数属性</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useSubmit, <span class="title class_">Form</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SearchFiled</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> submit = <span class="title function_">useSubmit</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 每次表单改动时提交 </span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Form</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      submit(null, &#123;method: &#x27;post&#x27;, action: &#x27;/change&#x27;&#125;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;search&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Search<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="React-Router-Utils"><a href="#React-Router-Utils" class="headerlink" title="React Router Utils"></a>React Router Utils</h3><h4 id="json"><a href="#json" class="headerlink" title="json"></a>json</h4><p>格式化数据</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;json&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loader</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">fetchData</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">json</span>(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h4><p>路由重定向</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;redirect&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loader</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>();</span><br><span class="line">  <span class="keyword">if</span>(res.<span class="property">status</span> == <span class="number">401</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">redirect</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="redirectDocument"><a href="#redirectDocument" class="headerlink" title="redirectDocument"></a>redirectDocument</h4><p>触发一个文档级别的重定向, 而不是基于客户端导航, 通常用于从一个应用跳转到另一个应用</p>
<h4 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h4><p>导航跳转替换当前的历史记录栈</p>
<h4 id="createRoutesFromElements"><a href="#createRoutesFromElements" class="headerlink" title="createRoutesFromElements"></a>createRoutesFromElements</h4><p>使用 JSX 元素创建路由, 简写形式是 <code>createRoutesFromChildren</code></p>
<h4 id="createSearchParams"><a href="#createSearchParams" class="headerlink" title="createSearchParams"></a>createSearchParams</h4><p><code>new URLSearchParams(init)</code> 的包装写法</p>
<h4 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h4><p>延迟 <a href="#Route.loader">loader</a> 的返回值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defer&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loader</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">defer</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="generatePath"><a href="#generatePath" class="headerlink" title="generatePath"></a>generatePath</h4><p>根据动态路由参数生成 url</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;generatePath&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">generatePath</span>(<span class="string">&#x27;/users/:id/:name&#x27;</span>, &#123;<span class="attr">id</span>: <span class="number">42</span>, <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;); <span class="comment">// /users/42/zhangsan</span></span><br></pre></td></tr></table></figure>

<h4 id="isRouteErrorResponse"><a href="#isRouteErrorResponse" class="headerlink" title="isRouteErrorResponse"></a>isRouteErrorResponse</h4><p>判断是否是由 <a href="#useRouteError">useRouteError</a> 捕获的路由错误</p>
<h4 id="matchPath"><a href="#matchPath" class="headerlink" title="matchPath"></a>matchPath</h4><p>将路由路径模式与 URL 路径进行匹配并返回有关的匹配信息, 否则返回 null</p>
<h4 id="matchRoutes"><a href="#matchRoutes" class="headerlink" title="matchRoutes"></a>matchRoutes</h4><p>执行一个路由匹配算法从给定的 routes 集合中找到匹配的路由并返回</p>
<h4 id="renderMatches"><a href="#renderMatches" class="headerlink" title="renderMatches"></a>renderMatches</h4><p>渲染 matchRoutes 匹配结果中的 React 元素</p>
<h4 id="resolvePath"><a href="#resolvePath" class="headerlink" title="resolvePath"></a>resolvePath</h4><p>根据给定的 to 解析为具有绝对路径的真实 path 对象</p>
<h4 id="createPath"><a href="#createPath" class="headerlink" title="createPath"></a>createPath</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>根据传入的 路径、参数、哈希创建 URL</p>
<h4 id="parsePath"><a href="#parsePath" class="headerlink" title="parsePath"></a>parsePath</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>解析一个 URL, 作用 和 createPath 相反</p>
<h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><blockquote>
<p>React Router v7 支持</p>
</blockquote>
<p>创建一个包含 status, headers 的 Response</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章推荐</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2022\02\f3581d54a2fe\" rel="bookmark">React-Nextjs.md</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2022\02\5ad505cb0ced\" rel="bookmark">React-Redux.md</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2022\02\7ec5bd96e943\" rel="bookmark">React.md</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2022\03\0734d1c7c12c\" rel="bookmark">JS</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2022\02\18f2de6d45f9\" rel="bookmark">JSUtils</a></div>
    </li>
  </ul>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>luoleiself
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://luoleiself.github.io/2022/02/0eb429a8209b/" title="React-Router.md">https://luoleiself.github.io/2022/02/0eb429a8209b/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/js/" rel="tag"># js</a>
              <a href="/tags/jsx/" rel="tag"># jsx</a>
              <a href="/tags/React/" rel="tag"># React</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/02/7ec5bd96e943/" rel="prev" title="React.md">
      <i class="fa fa-chevron-left"></i> React.md
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/02/5ad505cb0ced/" rel="next" title="React-Redux.md">
      React-Redux.md <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#React-Router"><span class="nav-number">1.</span> <span class="nav-text">React Router</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="nav-number">1.1.</span> <span class="nav-text">路由器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E6%94%AF%E6%8C%81-data-APIs"><span class="nav-number">1.1.1.</span> <span class="nav-text">不支持 data APIs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%94%AF%E6%8C%81-data-APIs"><span class="nav-number">1.1.2.</span> <span class="nav-text">支持 data APIs</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#createBrowserRouter"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">createBrowserRouter  </span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#RouterProvider"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">RouterProvider</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#createStaticHandler"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">createStaticHandler</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#createStaticRouter"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">createStaticRouter</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#StaticRouterProvider"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">StaticRouterProvider</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Route"><span class="nav-number">1.2.</span> <span class="nav-text">Route  </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-action"><span class="nav-number">1.2.1.</span> <span class="nav-text">Route.action  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-loader"><span class="nav-number">1.2.2.</span> <span class="nav-text">Route.loader  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-lazy"><span class="nav-number">1.2.3.</span> <span class="nav-text">Route.lazy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-shouldRevalidate"><span class="nav-number">1.2.4.</span> <span class="nav-text">Route.shouldRevalidate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-errorElement-errorBoundary"><span class="nav-number">1.2.5.</span> <span class="nav-text">Route.errorElement&#x2F;errorBoundary</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-hydrateFallbackElement-hydrateFallback"><span class="nav-number">1.2.6.</span> <span class="nav-text">Route.hydrateFallbackElement&#x2F;hydrateFallback</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-Router-%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">React Router 内置组件  </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Await"><span class="nav-number">1.3.1.</span> <span class="nav-text">Await  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Form"><span class="nav-number">1.3.2.</span> <span class="nav-text">Form</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Link"><span class="nav-number">1.3.3.</span> <span class="nav-text">Link  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NavLink"><span class="nav-number">1.3.4.</span> <span class="nav-text">NavLink</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Navigate"><span class="nav-number">1.3.5.</span> <span class="nav-text">Navigate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Outlet"><span class="nav-number">1.3.6.</span> <span class="nav-text">Outlet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Route-1"><span class="nav-number">1.3.7.</span> <span class="nav-text">Route</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Routes"><span class="nav-number">1.3.8.</span> <span class="nav-text">Routes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ScrollRestoration"><span class="nav-number">1.3.9.</span> <span class="nav-text">ScrollRestoration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Links"><span class="nav-number">1.3.10.</span> <span class="nav-text">Links</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Meta"><span class="nav-number">1.3.11.</span> <span class="nav-text">Meta</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PrefetchPageLinks"><span class="nav-number">1.3.12.</span> <span class="nav-text">PrefetchPageLinks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-Router-%E5%86%85%E7%BD%AE-Hook"><span class="nav-number">1.4.</span> <span class="nav-text">React Router 内置 Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#useActionData"><span class="nav-number">1.4.1.</span> <span class="nav-text">useActionData</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useAsyncError"><span class="nav-number">1.4.2.</span> <span class="nav-text">useAsyncError</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useAsyncValue"><span class="nav-number">1.4.3.</span> <span class="nav-text">useAsyncValue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useBeforeUnload"><span class="nav-number">1.4.4.</span> <span class="nav-text">useBeforeUnload</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useBlocker"><span class="nav-number">1.4.5.</span> <span class="nav-text">useBlocker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useFetcher"><span class="nav-number">1.4.6.</span> <span class="nav-text">useFetcher</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useFetchers"><span class="nav-number">1.4.7.</span> <span class="nav-text">useFetchers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useFormAction"><span class="nav-number">1.4.8.</span> <span class="nav-text">useFormAction</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useHref"><span class="nav-number">1.4.9.</span> <span class="nav-text">useHref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useInRouterContext"><span class="nav-number">1.4.10.</span> <span class="nav-text">useInRouterContext</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useLinkClickHandler"><span class="nav-number">1.4.11.</span> <span class="nav-text">useLinkClickHandler</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useLoaderData"><span class="nav-number">1.4.12.</span> <span class="nav-text">useLoaderData</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useLocation"><span class="nav-number">1.4.13.</span> <span class="nav-text">useLocation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useMatch"><span class="nav-number">1.4.14.</span> <span class="nav-text">useMatch  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useMatches"><span class="nav-number">1.4.15.</span> <span class="nav-text">useMatches  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useNavigate"><span class="nav-number">1.4.16.</span> <span class="nav-text">useNavigate  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useNavigation"><span class="nav-number">1.4.17.</span> <span class="nav-text">useNavigation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useNavigationType"><span class="nav-number">1.4.18.</span> <span class="nav-text">useNavigationType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useParams"><span class="nav-number">1.4.19.</span> <span class="nav-text">useParams  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useResolvedPath"><span class="nav-number">1.4.20.</span> <span class="nav-text">useResolvedPath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useRevalidator"><span class="nav-number">1.4.21.</span> <span class="nav-text">useRevalidator</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useRouteError"><span class="nav-number">1.4.22.</span> <span class="nav-text">useRouteError  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useRouteLoaderData"><span class="nav-number">1.4.23.</span> <span class="nav-text">useRouteLoaderData</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useRoutes"><span class="nav-number">1.4.24.</span> <span class="nav-text">useRoutes  </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useSearchParams"><span class="nav-number">1.4.25.</span> <span class="nav-text">useSearchParams</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#useSubmit"><span class="nav-number">1.4.26.</span> <span class="nav-text">useSubmit  </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#React-Router-Utils"><span class="nav-number">1.5.</span> <span class="nav-text">React Router Utils</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#json"><span class="nav-number">1.5.1.</span> <span class="nav-text">json</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#redirect"><span class="nav-number">1.5.2.</span> <span class="nav-text">redirect</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#redirectDocument"><span class="nav-number">1.5.3.</span> <span class="nav-text">redirectDocument</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#replace"><span class="nav-number">1.5.4.</span> <span class="nav-text">replace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#createRoutesFromElements"><span class="nav-number">1.5.5.</span> <span class="nav-text">createRoutesFromElements</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#createSearchParams"><span class="nav-number">1.5.6.</span> <span class="nav-text">createSearchParams</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#defer"><span class="nav-number">1.5.7.</span> <span class="nav-text">defer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#generatePath"><span class="nav-number">1.5.8.</span> <span class="nav-text">generatePath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#isRouteErrorResponse"><span class="nav-number">1.5.9.</span> <span class="nav-text">isRouteErrorResponse</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#matchPath"><span class="nav-number">1.5.10.</span> <span class="nav-text">matchPath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#matchRoutes"><span class="nav-number">1.5.11.</span> <span class="nav-text">matchRoutes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#renderMatches"><span class="nav-number">1.5.12.</span> <span class="nav-text">renderMatches</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#resolvePath"><span class="nav-number">1.5.13.</span> <span class="nav-text">resolvePath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#createPath"><span class="nav-number">1.5.14.</span> <span class="nav-text">createPath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#parsePath"><span class="nav-number">1.5.15.</span> <span class="nav-text">parsePath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#data"><span class="nav-number">1.5.16.</span> <span class="nav-text">data</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="luoleiself"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">luoleiself</p>
  <div class="site-description" itemprop="description">努力的往前飞, 再累也无所谓, 黑夜过后的光芒有多美...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/luoleiself" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;luoleiself" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:luoleiself@163.com" title="E-Mail → mailto:luoleiself@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://developer.mozilla.org/zh-CN/" title="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;" rel="noopener" target="_blank">MDN</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">luoleiself</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">645k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">9:47</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div><!-- canvas-nest -->
<!-- modify source/_data/footer.swig -->
<!-- modify _config.next.yml -> custom_file_path:footer -->
<!--
<script color="0,0,255" opacity="0.7" zIndex="-1" count="200" src="//cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script> 
-->
<style>
.highlight-container ::selection {
  color: #fc7237
};
</style>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
